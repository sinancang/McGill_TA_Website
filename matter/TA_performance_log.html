<!DOCTYPE html>
<html lang="en">
    <head>
        <title>McGill TA Management</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="../css/register.css">
        <link rel="stylesheet" href="../css/TAManagement.css">
    </head>
<body>

<!--Course is already selected at the begginning, how to reach that variable from the dashboard database? -->
<p style="font-size: 30px; padding-left: 15%;">TA Performance Log</p>
        <div class="form-container">
        <div class="sign-up-form" style="width: 70%;">
<form method="get" name="form" action="../utils/generateTA.php">

        <select id = "term" class="drop" name ="term" onchange="termSelected(this.value)"> 
            <option> Select a term </option>
            <option> FALL 2020 </option>
            <option> WINTER 2021 </option>
            <option> FALL 2021 </option>
            <option> WINTER 2022 </option>
        </select> <br></br>
<!--prof select a ta from a dropdown so generate dynamic dropdown-->
<select id = "TA_dropdown" class="drop" name="TA_dropdown">
    <option>Select a TA</option>
</select>
<p>Leave a note about the TA:</p>
<textarea id = "review" class="text-area" name="review" rows="5"></textarea><br>
<input id="button" type="submit" value = "submit your review" onclick="sendusername_course()"></button>
</form>
</div>
</div>
</body>
</html>

<script>
    //HOW TO GET COURSE NUM? IS MISSIN! //course-name get value by id in javascript and send it to php!
    //function to generate dropdown menu for TA names from the selected term.
    function termSelected(data){
        var ajaxreq = new XMLHttpRequest(); // New request object
        ajaxreq.open('GET', '../utils/generateTA.php?term='+data, true);
        ajaxreq.send();
        ajaxreq.onreadystatechange = function(){
            if(ajaxreq.readyState==4 && ajaxreq.status==200){
                document.getElementById("TA_dropdown").innerHTML = ajaxreq.responseText;
            }          
        }
    }

    //not sure if it works for sending username and course!!!
    function sendusername_course(){
        var name = document.getElementById('username'); 
        var course_selected = document.getElementById('selected-course'); 
        var xhttp = new XMLHttpRequest();
        xhttp.open("GET", "../utils/generateTA.php?username="+ username, true);
        xhttp.open("GET", "../utils/generateTA.php?course-selected="+ course_selected, true); //is this name true and can multiple variable be sent?
        xhttp.send();
        
    }
    
</script>