<!DOCTYPE html>
<html lang="en">

    <head>
        <title>McGill TA Management</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="../css/register.css">
        <link rel="stylesheet" href="../css/TAManagement.css">
    </head>
    <body>
        <p style="font-size: 30px; padding-left: 15%;">Rate A TA:</p>
        <div class="form-container">
        <div class="sign-up-form" style="width: 70%;">
        <form method="post" name="form" action="../utils/rateTASubmission.php" style="padding-left: 5%;">
        <p style="font-size: 15px;">Select a term:</p>
        <select id = "term" name ="term" onchange="termSelected(this.value)"class="drop"> 
            <option> -- </option>
            <option> FALL 2020 </option>
            <option> WINTER 2021 </option>
            <option> FALL 2021 </option>
            <option> WINTER 2022 </option>
        </select>
        <p style="font-size: 15px;">Select a TA from the options:</p>
        <select class="drop" id = "TA_dropdown" name="TA_dropdown">
        <option value="">--</option>
        </select>
        <p style="font-size: 15px;">Give a score for TA (1: lowest, 5: highest)</p>
        <select  class="drop" id = "score" name="score">
            <option> -- </option>
            <option> 1 </option>
            <option> 2 </option>
            <option> 3 </option>
            <option> 4 </option>
            <option> 5 </option>
        </select>

        <p style="font-size: 15px;">Leave a review:</p>
        <textarea id = "review" name="review" class="text-area" rows="5"></textarea><br>
        <input id="button" style="background-color: #d77171;" type="submit" value = "submit your review" onclick="sendCourseRequest()"></button>  
        </form>
    </div>
    </div>
       <!-- <script src="../js/rateTA.js">  </script> -->
        
    </body>

<script>
    //function to generate dropdown menu for TA names from the selected term.
    function termSelected(data){
        var ajaxreq = new XMLHttpRequest(); // New request object
        ajaxreq.open('GET', '../utils/rateTAdropdown.php?selectvalue='+data, true); //change this to that of TA_performance_log
        ajaxreq.send();
        ajaxreq.onreadystatechange = function(){
            if(ajaxreq.readyState==4 && ajaxreq.status==200){
                document.getElementById("TA_dropdown").innerHTML = ajaxreq.responseText;
            }          
        }
    } 

    function sendCourseRequest(){
        var course_selected = document.getElementById('selected-course'); 
        var xhttp = new XMLHttpRequest();
        xhttp.open("POST", "../utils/generateTA.php?selected-course="+ course_selected, true); //is this name true and can multiple variable be sent?
        xhttp.send();
    }
</script>